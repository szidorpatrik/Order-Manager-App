@page "/items"
@inject LiteDbService LiteDb

<h1>Items</h1>

@if (!ItemsList.Any())
{
    <div class="d-flex flex-grow-1 align-center justify-center mud-width-full">
        <MudText Typo="Typo.h6">@Localizer["ThereAreNoItems"]</MudText>
    </div>
}
else
{
    <div class="d-flex flex-column gap-3">
        @foreach (var item in ItemsList)
        {
            <ItemCard Item="item" />
        }
    </div>
    <div class="d-flex flex-grow-1"></div>
}
<div class="d-flex align-center justify-end mud-width-full">
    <MudFab Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" OnClick="@(()=>OpenItemDialog())" />
</div>

@code {
    private List<Item> ItemsList = new();

    protected override void OnInitialized()
    {
        ItemsList = LiteDb.GetItems();
    }

    private Task OpenItemDialog()
    {
        var parameter = new DialogParameters { ["Item"] = new Item() };
        var options = new DialogOptions { CloseOnEscapeKey = true, CloseButton = true, FullWidth = true, Position = DialogPosition.TopCenter };
        var dialog = DialogService.ShowAsync<ItemDialog>(Localizer["AddItem"], parameter, options);
        return dialog;
    }
}
